{"ast":null,"code":"\"use strict\";\n\nconst fs = require('fs');\nconst path = require('path');\nconst express = require('express');\nconst logger = require('morgan');\nconst cors = require('cors');\nconst compression = require('compression');\nconst errorhandler = require('errorhandler');\nconst objectAssign = require('object-assign');\nconst bodyParser = require('./body-parser');\nmodule.exports = function (opts) {\n  const userDir = path.join(process.cwd(), 'public');\n  const defaultDir = path.join(__dirname, '../../dist');\n  const staticDir = fs.existsSync(userDir) ? userDir : defaultDir;\n  opts = objectAssign({\n    logger: true,\n    static: staticDir\n  }, opts);\n  const arr = []; // Compress all requests\n\n  if (!opts.noGzip) {\n    arr.push(compression());\n  } // Enable CORS for all the requests, including static files\n\n  if (!opts.noCors) {\n    arr.push(cors({\n      origin: true,\n      credentials: true\n    }));\n  }\n  if (process.env.NODE_ENV === 'development') {\n    // only use in development\n    arr.push(errorhandler());\n  } // Serve static files\n\n  arr.push(express.static(opts.static)); // Logger\n\n  if (opts.logger) {\n    arr.push(logger('dev', {\n      skip: req => process.env.NODE_ENV === 'test' || req.path === '/favicon.ico'\n    }));\n  } // No cache for IE\n  // https://support.microsoft.com/en-us/kb/234067\n\n  arr.push((req, res, next) => {\n    res.header('Cache-Control', 'no-cache');\n    res.header('Pragma', 'no-cache');\n    res.header('Expires', '-1');\n    next();\n  }); // Read-only\n\n  if (opts.readOnly) {\n    arr.push((req, res, next) => {\n      if (req.method === 'GET') {\n        next(); // Continue\n      } else {\n        res.sendStatus(403); // Forbidden\n      }\n    });\n  } // Add middlewares\n\n  if (opts.bodyParser) {\n    arr.push(bodyParser);\n  }\n  return arr;\n};","map":{"version":3,"names":["fs","require","path","express","logger","cors","compression","errorhandler","objectAssign","bodyParser","module","exports","opts","userDir","join","process","cwd","defaultDir","__dirname","staticDir","existsSync","static","arr","noGzip","push","noCors","origin","credentials","env","NODE_ENV","skip","req","res","next","header","readOnly","method","sendStatus"],"sources":["/home/zanegoodman/Springboard/CAPSTONES/CAPSTONE_2/node_modules/json-server/lib/server/defaults.js"],"sourcesContent":["\"use strict\";\n\nconst fs = require('fs');\n\nconst path = require('path');\n\nconst express = require('express');\n\nconst logger = require('morgan');\n\nconst cors = require('cors');\n\nconst compression = require('compression');\n\nconst errorhandler = require('errorhandler');\n\nconst objectAssign = require('object-assign');\n\nconst bodyParser = require('./body-parser');\n\nmodule.exports = function (opts) {\n  const userDir = path.join(process.cwd(), 'public');\n  const defaultDir = path.join(__dirname, '../../dist');\n  const staticDir = fs.existsSync(userDir) ? userDir : defaultDir;\n  opts = objectAssign({\n    logger: true,\n    static: staticDir\n  }, opts);\n  const arr = []; // Compress all requests\n\n  if (!opts.noGzip) {\n    arr.push(compression());\n  } // Enable CORS for all the requests, including static files\n\n\n  if (!opts.noCors) {\n    arr.push(cors({\n      origin: true,\n      credentials: true\n    }));\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    // only use in development\n    arr.push(errorhandler());\n  } // Serve static files\n\n\n  arr.push(express.static(opts.static)); // Logger\n\n  if (opts.logger) {\n    arr.push(logger('dev', {\n      skip: req => process.env.NODE_ENV === 'test' || req.path === '/favicon.ico'\n    }));\n  } // No cache for IE\n  // https://support.microsoft.com/en-us/kb/234067\n\n\n  arr.push((req, res, next) => {\n    res.header('Cache-Control', 'no-cache');\n    res.header('Pragma', 'no-cache');\n    res.header('Expires', '-1');\n    next();\n  }); // Read-only\n\n  if (opts.readOnly) {\n    arr.push((req, res, next) => {\n      if (req.method === 'GET') {\n        next(); // Continue\n      } else {\n        res.sendStatus(403); // Forbidden\n      }\n    });\n  } // Add middlewares\n\n\n  if (opts.bodyParser) {\n    arr.push(bodyParser);\n  }\n\n  return arr;\n};"],"mappings":"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"},"metadata":{},"sourceType":"script"}